"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.generateDynamicImportRuntime = void 0;
function generateDynamicImportRuntime(
// localFilename: Array<possible importee>
entries, dynamicImportIndex) {
    const name = `__variableDynamicImportRuntime${dynamicImportIndex}__`;
    const cases = Object.entries(entries).map(([localFile, importeeList]) => {
        const c = importeeList.map(importee => `    case '${importee}':`);
        return `${c.join('\n')}
      return import('${localFile}');
`;
    });
    const body = `
function ${name}(path) {
  switch (path) {
${cases.join('\n')}
    default: return new Promise(function(resolve, reject) {
      (typeof queueMicrotask === 'function' ? queueMicrotask : setTimeout)(
        reject.bind(null, new Error("Unknown variable dynamic import: " + path))
      );
    })
  }
}
`;
    return { name, body };
}
exports.generateDynamicImportRuntime = generateDynamicImportRuntime;
